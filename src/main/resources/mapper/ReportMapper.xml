<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="org.mywork.stitchbe.mapper.board.ReportMapper">

    <!-- 신고 데이터 삽입 -->
    <insert id="insertReport" parameterType="org.mywork.stitchbe.dto.board.ReportDto">
        INSERT INTO report (
            member_id,
            post_or_comment,
            board_table,
            board_id,
            comment_id,
            type,
            reason,
            content,
            regdate
        ) VALUES (
                     #{memberId},
                     #{postOrComment},
                     #{boardTable},
                     #{boardId},
                     #{commentId},
                     #{type},
                     #{reason},
                     #{content},
                     SYSDATE
                 )
    </insert>

<!--    &lt;!&ndash; 특정 신고 데이터 조회 (필요 시) &ndash;&gt;-->
<!--    <select id="selectReportById" parameterType="Long" resultType="org.mywork.stitchbe.dto.board.ReportDto">-->
<!--        SELECT *-->
<!--        FROM report-->
<!--        WHERE report_id = #{reportId}-->
<!--    </select>-->

<!--    &lt;!&ndash; 신고 데이터 업데이트 (필요 시) &ndash;&gt;-->
<!--    <update id="updateReport" parameterType="org.mywork.stitchbe.dto.board.ReportDto">-->
<!--        UPDATE report-->
<!--        SET-->
<!--            type = #{type},-->
<!--            reason = #{reason},-->
<!--            content = #{content},-->
<!--            regdate = SYSDATE-->
<!--        WHERE report_id = #{reportId}-->
<!--    </update>-->

<!--    &lt;!&ndash; 신고 데이터 삭제 (필요 시) &ndash;&gt;-->
<!--    <delete id="deleteReport" parameterType="Long">-->
<!--        DELETE FROM report-->
<!--        WHERE report_id = #{reportId}-->
<!--    </delete>-->


    <!-- 호영 -->
    <!-- 신고 데이터 조회 -->
    <select id="selectReports" resultType="org.mywork.stitchbe.dto.board.ReportDto">
        SELECT r.report_id AS reportId,
        r.member_id AS memberId,
        m.nickname AS nickname,
        r.post_or_comment AS postOrComment,
        r.board_table AS boardTable,
        r.board_id AS boardId,
        r.comment_id AS commentId,
        r.type AS type,
        r.reason AS reason,
        r.content AS content,
        r.regdate AS regdate
        FROM report r
        JOIN member m ON r.member_id = m.member_id
        ORDER BY r.regdate DESC
    </select>

</mapper>
