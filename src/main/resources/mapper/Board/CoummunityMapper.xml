<mapper namespace="org.mywork.stitchbe.mapper.board.CoummunityMapper">
    <!-- 게시글 생성 -->
    <insert id="createPost" parameterType="CommunityDto">
        INSERT INTO community (member_id, title, content, category, tag, regdate, views, use_yn)
        VALUES (#{memberId}, #{title}, #{content}, #{category}, #{tag, jdbcType=VARCHAR}, SYSDATE, 0, 'Y')
    </insert>

    <!-- 게시글 조회 -->
    <select id="getPostById" parameterType="long" resultType="CommunityDto">
        SELECT * FROM community WHERE board_id = #{boardId}
    </select>

    <!-- 게시글 목록 조회 -->
    <select id="getAllPosts" resultType="CommunityDto">
        SELECT * FROM community
    </select>

    <!-- 게시글 수정 -->
    <update id="updatePost" parameterType="CommunityDto">
        UPDATE community
        SET title = #{title}, content = #{content}, category = #{category}, tag = #{tag}, views = #{views}, editdate = SYSDATE
        WHERE board_id = #{boardId}
    </update>

    <!-- 게시글 삭제 -->
    <delete id="deletePost" parameterType="long">
        DELETE FROM community WHERE board_id = #{boardId}
    </delete>
</mapper>
